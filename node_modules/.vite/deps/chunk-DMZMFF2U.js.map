{
  "version": 3,
  "sources": ["../../@vaadin/a11y-base/src/focus-restoration-controller.js"],
  "sourcesContent": ["/**\r\n * @license\r\n * Copyright (c) 2021 - 2025 Vaadin Ltd.\r\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\r\n */\r\nimport { getDeepActiveElement } from './focus-utils.js';\r\n\r\n/**\r\n * A controller for saving a focused node and restoring focus to it later.\r\n */\r\nexport class FocusRestorationController {\r\n  /**\r\n   * Saves the given node as a target for restoring focus to\r\n   * when `restoreFocus()` is called. If no node is provided,\r\n   * the currently focused node in the DOM is saved as a target.\r\n   *\r\n   * @param {Node | null | undefined} focusNode\r\n   */\r\n  saveFocus(focusNode) {\r\n    this.focusNode = focusNode || getDeepActiveElement();\r\n  }\r\n\r\n  /**\r\n   * Restores focus to the target node that was saved previously with `saveFocus()`.\r\n   */\r\n  restoreFocus(options) {\r\n    const focusNode = this.focusNode;\r\n    if (!focusNode) {\r\n      return;\r\n    }\r\n\r\n    const preventScroll = options ? options.preventScroll : false;\r\n\r\n    if (getDeepActiveElement() === document.body) {\r\n      // In Firefox and Safari, focusing the node synchronously\r\n      // doesn't work as expected when the overlay is closing on outside click.\r\n      // These browsers force focus to move to the body element and retain it\r\n      // there until the next event loop iteration.\r\n      setTimeout(() => focusNode.focus({ preventScroll }));\r\n    } else {\r\n      focusNode.focus({ preventScroll });\r\n    }\r\n\r\n    this.focusNode = null;\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;AAUO,IAAM,6BAAN,MAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQtC,UAAU,WAAW;AACnB,SAAK,YAAY,aAAa,qBAAqB;AAAA,EACrD;AAAA;AAAA;AAAA;AAAA,EAKA,aAAa,SAAS;AACpB,UAAM,YAAY,KAAK;AACvB,QAAI,CAAC,WAAW;AACd;AAAA,IACF;AAEA,UAAM,gBAAgB,UAAU,QAAQ,gBAAgB;AAExD,QAAI,qBAAqB,MAAM,SAAS,MAAM;AAK5C,iBAAW,MAAM,UAAU,MAAM,EAAE,cAAc,CAAC,CAAC;AAAA,IACrD,OAAO;AACL,gBAAU,MAAM,EAAE,cAAc,CAAC;AAAA,IACnC;AAEA,SAAK,YAAY;AAAA,EACnB;AACF;",
  "names": []
}
