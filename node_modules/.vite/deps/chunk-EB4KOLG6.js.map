{
  "version": 3,
  "sources": ["../../ol/src/source/Source.js"],
  "sourcesContent": ["/**\r\n * @module ol/source/Source\r\n */\r\nimport BaseObject from '../Object.js';\r\nimport SourceState from './State.js';\r\nimport {abstract} from '../util.js';\r\nimport {get as getProjection} from '../proj.js';\r\n\r\n/**\r\n * A function that takes a {@link module:ol/PluggableMap~FrameState} and returns a string or\r\n * an array of strings representing source attributions.\r\n *\r\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\r\n */\r\n\r\n/**\r\n * A type that can be used to provide attribution information for data sources.\r\n *\r\n * It represents either\r\n * * a simple string (e.g. `'© Acme Inc.'`)\r\n * * an array of simple strings (e.g. `['© Acme Inc.', '© Bacme Inc.']`)\r\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\r\n *\r\n * @typedef {string|Array<string>|Attribution} AttributionLike\r\n */\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {AttributionLike} [attributions] Attributions.\r\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\r\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\r\n * @property {import(\"./State.js\").default} [state='ready'] State.\r\n * @property {boolean} [wrapX=false] WrapX.\r\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\r\n * the nearest neighbor is used when resampling.\r\n */\r\n\r\n/**\r\n * @classdesc\r\n * Abstract base class; normally only used for creating subclasses and not\r\n * instantiated in apps.\r\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\r\n *\r\n * A generic `change` event is triggered when the state of the source changes.\r\n * @abstract\r\n * @api\r\n */\r\nclass Source extends BaseObject {\r\n  /**\r\n   * @param {Options} options Source options.\r\n   */\r\n  constructor(options) {\r\n    super();\r\n\r\n    /**\r\n     * @protected\r\n     * @type {import(\"../proj/Projection.js\").default}\r\n     */\r\n    this.projection = getProjection(options.projection);\r\n\r\n    /**\r\n     * @private\r\n     * @type {?Attribution}\r\n     */\r\n    this.attributions_ = adaptAttributions(options.attributions);\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.attributionsCollapsible_ =\r\n      options.attributionsCollapsible !== undefined\r\n        ? options.attributionsCollapsible\r\n        : true;\r\n\r\n    /**\r\n     * This source is currently loading data. Sources that defer loading to the\r\n     * map's tile queue never set this to `true`.\r\n     * @type {boolean}\r\n     */\r\n    this.loading = false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {import(\"./State.js\").default}\r\n     */\r\n    this.state_ =\r\n      options.state !== undefined ? options.state : SourceState.READY;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.interpolate_ = !!options.interpolate;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {function(import(\"../View.js\").ViewOptions):void}\r\n     */\r\n    this.viewResolver = null;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {function(Error):void}\r\n     */\r\n    this.viewRejector = null;\r\n\r\n    const self = this;\r\n    /**\r\n     * @private\r\n     * @type {Promise<import(\"../View.js\").ViewOptions>}\r\n     */\r\n    this.viewPromise_ = new Promise(function (resolve, reject) {\r\n      self.viewResolver = resolve;\r\n      self.viewRejector = reject;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the attribution function for the source.\r\n   * @return {?Attribution} Attribution function.\r\n   * @api\r\n   */\r\n  getAttributions() {\r\n    return this.attributions_;\r\n  }\r\n\r\n  /**\r\n   * @return {boolean} Attributions are collapsible.\r\n   * @api\r\n   */\r\n  getAttributionsCollapsible() {\r\n    return this.attributionsCollapsible_;\r\n  }\r\n\r\n  /**\r\n   * Get the projection of the source.\r\n   * @return {import(\"../proj/Projection.js\").default} Projection.\r\n   * @api\r\n   */\r\n  getProjection() {\r\n    return this.projection;\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   * @return {Array<number>|null} Resolutions.\r\n   */\r\n  getResolutions() {\r\n    return abstract();\r\n  }\r\n\r\n  /**\r\n   * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\r\n   */\r\n  getView() {\r\n    return this.viewPromise_;\r\n  }\r\n\r\n  /**\r\n   * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\r\n   * @return {import(\"./State.js\").default} State.\r\n   * @api\r\n   */\r\n  getState() {\r\n    return this.state_;\r\n  }\r\n\r\n  /**\r\n   * @return {boolean|undefined} Wrap X.\r\n   */\r\n  getWrapX() {\r\n    return this.wrapX_;\r\n  }\r\n\r\n  /**\r\n   * @return {boolean} Use linear interpolation when resampling.\r\n   */\r\n  getInterpolate() {\r\n    return this.interpolate_;\r\n  }\r\n\r\n  /**\r\n   * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\r\n   * @api\r\n   */\r\n  refresh() {\r\n    this.changed();\r\n  }\r\n\r\n  /**\r\n   * Set the attributions of the source.\r\n   * @param {AttributionLike|undefined} attributions Attributions.\r\n   *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\r\n   *     or `undefined`.\r\n   * @api\r\n   */\r\n  setAttributions(attributions) {\r\n    this.attributions_ = adaptAttributions(attributions);\r\n    this.changed();\r\n  }\r\n\r\n  /**\r\n   * Set the state of the source.\r\n   * @param {import(\"./State.js\").default} state State.\r\n   */\r\n  setState(state) {\r\n    this.state_ = state;\r\n    this.changed();\r\n  }\r\n}\r\n\r\n/**\r\n * Turns the attributions option into an attributions function.\r\n * @param {AttributionLike|undefined} attributionLike The attribution option.\r\n * @return {Attribution|null} An attribution function (or null).\r\n */\r\nfunction adaptAttributions(attributionLike) {\r\n  if (!attributionLike) {\r\n    return null;\r\n  }\r\n  if (Array.isArray(attributionLike)) {\r\n    return function (frameState) {\r\n      return attributionLike;\r\n    };\r\n  }\r\n\r\n  if (typeof attributionLike === 'function') {\r\n    return attributionLike;\r\n  }\r\n\r\n  return function (frameState) {\r\n    return [attributionLike];\r\n  };\r\n}\r\n\r\nexport default Source;\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,IAAA;;EAAA,SAAA,QAAA;AAAqB,cAAAA,SAAA,MAAA;AAInB,aAAAA,QAAY,SAAO;AAAnB,UAAA,QACE,OAAA,KAAA,IAAA,KAAO;AAMP,YAAK,aAAa,IAAc,QAAQ,UAAU;AAMlD,YAAK,gBAAgB,kBAAkB,QAAQ,YAAY;AAM3D,YAAK,2BACH,QAAQ,4BAA4B,SAChC,QAAQ,0BACR;AAON,YAAK,UAAU;AAMf,YAAK,SACH,QAAQ,UAAU,SAAY,QAAQ,QAAQ,cAAY;AAM5D,YAAK,SAAS,QAAQ,UAAU,SAAY,QAAQ,QAAQ;AAM5D,YAAK,eAAe,CAAC,CAAC,QAAQ;AAM9B,YAAK,eAAe;AAMpB,YAAK,eAAe;AAEpB,UAAM,OAAO;AAKb,YAAK,eAAe,IAAI,QAAQ,SAAU,SAAS,QAAM;AACvD,aAAK,eAAe;AACpB,aAAK,eAAe;MACtB,CAAC;;IACH;AAOA,IAAAA,QAAA,UAAA,kBAAA,WAAA;AACE,aAAO,KAAK;IACd;AAMA,IAAAA,QAAA,UAAA,6BAAA,WAAA;AACE,aAAO,KAAK;IACd;AAOA,IAAAA,QAAA,UAAA,gBAAA,WAAA;AACE,aAAO,KAAK;IACd;AAMA,IAAAA,QAAA,UAAA,iBAAA,WAAA;AACE,aAAO,SAAQ;IACjB;AAKA,IAAAA,QAAA,UAAA,UAAA,WAAA;AACE,aAAO,KAAK;IACd;AAOA,IAAAA,QAAA,UAAA,WAAA,WAAA;AACE,aAAO,KAAK;IACd;AAKA,IAAAA,QAAA,UAAA,WAAA,WAAA;AACE,aAAO,KAAK;IACd;AAKA,IAAAA,QAAA,UAAA,iBAAA,WAAA;AACE,aAAO,KAAK;IACd;AAMA,IAAAA,QAAA,UAAA,UAAA,WAAA;AACE,WAAK,QAAO;IACd;AASA,IAAAA,QAAA,UAAA,kBAAA,SAAgB,cAAY;AAC1B,WAAK,gBAAgB,kBAAkB,YAAY;AACnD,WAAK,QAAO;IACd;AAMA,IAAAA,QAAA,UAAA,WAAA,SAAS,OAAK;AACZ,WAAK,SAAS;AACd,WAAK,QAAO;IACd;AACF,WAAAA;EAAA,EAzKqB,cAAU;;AAgL/B,SAAS,kBAAkB,iBAAe;AACxC,MAAI,CAAC,iBAAiB;AACpB,WAAO;;AAET,MAAI,MAAM,QAAQ,eAAe,GAAG;AAClC,WAAO,SAAU,YAAU;AACzB,aAAO;IACT;;AAGF,MAAI,OAAO,oBAAoB,YAAY;AACzC,WAAO;;AAGT,SAAO,SAAU,YAAU;AACzB,WAAO,CAAC,eAAe;EACzB;AACF;AAEA,IAAA,iBAAe;",
  "names": ["Source"]
}
