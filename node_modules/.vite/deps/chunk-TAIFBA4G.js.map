{
  "version": 3,
  "sources": ["../../@vaadin/a11y-base/src/announce.js"],
  "sourcesContent": ["/**\r\n * @license\r\n * Copyright (c) 2022 - 2025 Vaadin Ltd.\r\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\r\n */\r\nimport { animationFrame } from '@vaadin/component-base/src/async.js';\r\nimport { Debouncer } from '@vaadin/component-base/src/debounce.js';\r\n\r\nconst region = document.createElement('div');\r\n\r\nregion.style.position = 'fixed';\r\nregion.style.clip = 'rect(0px, 0px, 0px, 0px)';\r\nregion.setAttribute('aria-live', 'polite');\r\n\r\ndocument.body.appendChild(region);\r\n\r\nlet alertDebouncer;\r\n/**\r\n * Cause a text string to be announced by screen readers.\r\n *\r\n * @param {string} text The text that should be announced by the screen reader.\r\n * @param {{mode?: string, timeout?: number}} options Additional options.\r\n */\r\nexport function announce(text, options = {}) {\r\n  const mode = options.mode || 'polite';\r\n  const timeout = options.timeout === undefined ? 150 : options.timeout;\r\n\r\n  if (mode === 'alert') {\r\n    region.removeAttribute('aria-live');\r\n    region.removeAttribute('role');\r\n    alertDebouncer = Debouncer.debounce(alertDebouncer, animationFrame, () => {\r\n      region.setAttribute('role', 'alert');\r\n    });\r\n  } else {\r\n    if (alertDebouncer) {\r\n      alertDebouncer.cancel();\r\n    }\r\n    region.removeAttribute('role');\r\n    region.setAttribute('aria-live', mode);\r\n  }\r\n\r\n  region.textContent = '';\r\n\r\n  setTimeout(() => {\r\n    region.textContent = text;\r\n  }, timeout);\r\n}\r\n"],
  "mappings": ";;;;;;;;AAQA,IAAM,SAAS,SAAS,cAAc,KAAK;AAE3C,OAAO,MAAM,WAAW;AACxB,OAAO,MAAM,OAAO;AACpB,OAAO,aAAa,aAAa,QAAQ;AAEzC,SAAS,KAAK,YAAY,MAAM;AAEhC,IAAI;AAOG,SAAS,SAAS,MAAM,UAAU,CAAC,GAAG;AAC3C,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,UAAU,QAAQ,YAAY,SAAY,MAAM,QAAQ;AAE9D,MAAI,SAAS,SAAS;AACpB,WAAO,gBAAgB,WAAW;AAClC,WAAO,gBAAgB,MAAM;AAC7B,qBAAiB,UAAU,SAAS,gBAAgB,gBAAgB,MAAM;AACxE,aAAO,aAAa,QAAQ,OAAO;AAAA,IACrC,CAAC;AAAA,EACH,OAAO;AACL,QAAI,gBAAgB;AAClB,qBAAe,OAAO;AAAA,IACxB;AACA,WAAO,gBAAgB,MAAM;AAC7B,WAAO,aAAa,aAAa,IAAI;AAAA,EACvC;AAEA,SAAO,cAAc;AAErB,aAAW,MAAM;AACf,WAAO,cAAc;AAAA,EACvB,GAAG,OAAO;AACZ;",
  "names": []
}
